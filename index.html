<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
  </head>
  <body>
    <div id="app">
      <nav class="flex">
        <h2>Favourite Dishes ‚ú®</h2>
      </nav>
      <main>
        <dishes @add-to-cart="addToCart"></dishes>
        <cart></cart>
      </main>

      <div class="toast-message">
        <p><span>Coming Soon</span> ‚Üí Add your own favourite dishes üç±</p>
      </div>
    </div>

    <!-- X-TEMPLATES FOR DISH -->
    <!-- DISH ITEM -->
    <script type="text/x-template" id="dish-item-template">
      <li :key="dish.id">
        <div>
          <img :src="dish.url" alt="dish.name" width="180" height="250" />
          <p>{{dish.name}} ¬∑ ‚Çπ {{dish.price}}</p>
          <button
            class="add-to-cart"
            v-if="!cart.find( ({ name }) => name === dish.name )"
            @click="$emit('add-to-cart', dish)"
            >
            Add to Cart
          </button>
          <button
                class="in-cart"
                disabled
                v-if="cart.find( ({ name }) => name === dish.name )"
              >
                Added!
              </button>
        </div>
      </li>
    </script>

    <!-- DISH -->
    <script type="text/x-template" id="dishes-template">
      <ul>
        <dish-item v-for="dish in dishes" :dish="dish" @add-to-cart="$emit('addToCart', dish)">
        </dish-item>
      </ul>
    </script>

    <!-- X-TEMPLATES FOR CART -->

    <!-- CART ITEM -->
    <script type="text/x-template" id="cart-item-template">
      <li :key="item.id">
        <div class="cart-item">
          <div class="cart-item-img">
            <img :src="item.url" :alt="item.name" height="40" width="40" />
            <input type="number" min="1" v-model.number="item.count" />
          </div>
          <div class="card-item-details">
            <p>{{item.name}}</p>
            <p>‚Çπ {{item.sum = item.count * item.price}}</p>
            <div>
              <a @click="$emit('remove-cart-item', item)" title="Delete Item"> Remove </a>
            </div>
          </div>
        </div>
      </li>
    </script>

    <!-- CART -->
    <script type="text/x-template" id="cart-template">
      <aside v-if="cart.length" :cart="cart" >
        <div>
          <p>Cart</p>
          <p class="count">{{cart.length}}</p>
        </div>
        <ul>
          <cart-item v-for="item in cart" :item="item" @remove-cart-item="removeItem"></cart-item>
        </ul>
        <p>Total Amount: ‚Çπ {{totalPrice}}</p>
      </aside>
    </script>

    <script src="https://unpkg.com/vue@next"></script>
    <script type="module" src="/main.js"></script>
  </body>
</html>
